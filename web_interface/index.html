<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediScan Voice Triage & Coordinator - Live Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen text-white">
    
    <!-- Header -->
    <header class="bg-black bg-opacity-40 backdrop-blur-lg border-b border-blue-500/30 py-6">
        <div class="container mx-auto px-6">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                        MediScan Voice Triage & Coordinator
                    </h1>
                    <p class="text-blue-300 mt-2">AI-Powered Clinical Assistant System</p>
                </div>
                <div class="text-right">
                    <div class="text-sm text-blue-300">Powered by</div>
                    <div class="text-lg font-bold">Google ADK + Gemini 2.0</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-8">
        
        <!-- Demo Controls -->
        <div class="bg-slate-800 rounded-xl p-6 mb-8 border border-blue-500/30">
            <h2 class="text-2xl font-bold mb-4">üé¨ Live Demo</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Voice Input -->
                <div>
                    <label class="block text-sm font-semibold mb-2">Patient Voice Input</label>
                    <textarea 
                        id="voiceInput" 
                        class="w-full bg-slate-700 border border-slate-600 rounded-lg p-3 text-white"
                        rows="4"
                        placeholder="I've had fever for 2 days, cough, and tightness in my chest. I have high blood pressure and take lisinopril. Here's my insurance card..."
                    ></textarea>
                </div>
                
                <!-- Document Upload -->
                <div>
                    <label class="block text-sm font-semibold mb-2">Upload Documents (Simulated)</label>
                    <div class="bg-slate-700 border-2 border-dashed border-slate-600 rounded-lg p-6 text-center">
                        <div class="text-4xl mb-2">üìÑ</div>
                        <p class="text-sm text-slate-400">Insurance Card, Medical Records, Prescriptions</p>
                        <button class="mt-3 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm">
                            Select Files
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Start Button -->
            <button 
                id="startDemo" 
                onclick="startDemo()"
                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-bold py-4 rounded-lg text-lg transition-all shadow-lg hover:shadow-xl"
            >
                üöÄ Start Patient Intake Processing
            </button>
        </div>

        <!-- Agent Activity Dashboard -->
        <div id="agentDashboard" class="hidden">
            <h2 class="text-2xl font-bold mb-4">ü§ñ Multi-Agent Activity</h2>
            
            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-8">
                <!-- Agent 1 -->
                <div id="agent1" class="bg-slate-800 rounded-lg p-4 border border-slate-700 transition-all">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-2xl">üé§</span>
                        </div>
                        <div>
                            <div class="font-bold text-sm">Agent 1</div>
                            <div class="text-xs text-slate-400">Voice Intake</div>
                        </div>
                    </div>
                    <div id="agent1Status" class="text-xs text-slate-400">Waiting...</div>
                </div>

                <!-- Agent 2 -->
                <div id="agent2" class="bg-slate-800 rounded-lg p-4 border border-slate-700 transition-all">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-2xl">üß†</span>
                        </div>
                        <div>
                            <div class="font-bold text-sm">Agent 2</div>
                            <div class="text-xs text-slate-400">Symptom Reasoning</div>
                        </div>
                    </div>
                    <div id="agent2Status" class="text-xs text-slate-400">Waiting...</div>
                </div>

                <!-- Agent 3 -->
                <div id="agent3" class="bg-slate-800 rounded-lg p-4 border border-slate-700 transition-all">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-2xl">üìÑ</span>
                        </div>
                        <div>
                            <div class="font-bold text-sm">Agent 3</div>
                            <div class="text-xs text-slate-400">Document Processing</div>
                        </div>
                    </div>
                    <div id="agent3Status" class="text-xs text-slate-400">Waiting...</div>
                </div>

                <!-- Agent 4 -->
                <div id="agent4" class="bg-slate-800 rounded-lg p-4 border border-slate-700 transition-all">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-red-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-2xl">‚ö°</span>
                        </div>
                        <div>
                            <div class="font-bold text-sm">Agent 4</div>
                            <div class="text-xs text-slate-400">Triage Coordinator</div>
                        </div>
                    </div>
                    <div id="agent4Status" class="text-xs text-slate-400">Waiting...</div>
                </div>

                <!-- Agent 5 -->
                <div id="agent5" class="bg-slate-800 rounded-lg p-4 border border-slate-700 transition-all">
                    <div class="flex items-center mb-3">
                        <div class="w-12 h-12 bg-yellow-600 rounded-lg flex items-center justify-center mr-3">
                            <span class="text-2xl">‚úÖ</span>
                        </div>
                        <div>
                            <div class="font-bold text-sm">Agent 5</div>
                            <div class="text-xs text-slate-400">Care Plan Generator</div>
                        </div>
                    </div>
                    <div id="agent5Status" class="text-xs text-slate-400">Waiting...</div>
                </div>
            </div>

            <!-- Processing Timeline -->
            <div class="bg-slate-800 rounded-xl p-6 mb-8 border border-slate-700">
                <h3 class="text-xl font-bold mb-4">üîÑ Processing Timeline</h3>
                <div id="timeline" class="space-y-2">
                    <!-- Timeline items will be added dynamically -->
                </div>
            </div>

            <!-- Results Grid -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <!-- Doctor View -->
                <div class="bg-gradient-to-br from-emerald-900 to-emerald-800 rounded-xl p-6 border border-emerald-600">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="text-2xl mr-2">üë®‚Äç‚öïÔ∏è</span> Doctor View
                    </h3>
                    <div id="doctorView" class="text-sm space-y-3">
                        <div class="typing-indicator">
                            <span>.</span><span>.</span><span>.</span>
                        </div>
                    </div>
                </div>

                <!-- Patient View -->
                <div class="bg-gradient-to-br from-blue-900 to-blue-800 rounded-xl p-6 border border-blue-600">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="text-2xl mr-2">üè•</span> Patient View
                    </h3>
                    <div id="patientView" class="text-sm space-y-3">
                        <div class="typing-indicator">
                            <span>.</span><span>.</span><span>.</span>
                        </div>
                    </div>
                </div>

                <!-- System Actions -->
                <div class="bg-gradient-to-br from-orange-900 to-orange-800 rounded-xl p-6 border border-orange-600">
                    <h3 class="text-xl font-bold mb-4 flex items-center">
                        <span class="text-2xl mr-2">‚öôÔ∏è</span> System Actions
                    </h3>
                    <div id="systemActions" class="text-sm space-y-3">
                        <div class="typing-indicator">
                            <span>.</span><span>.</span><span>.</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Demo simulation script
        let currentAgent = 0;
        const agents = [
            { id: 1, name: "Voice Intake", duration: 3000 },
            { id: 2, name: "Symptom Reasoning", duration: 4000 },
            { id: 3, name: "Document Processing", duration: 3000 },
            { id: 4, name: "Triage Coordination", duration: 4000 },
            { id: 5, name: "Care Plan Generation", duration: 3000 }
        ];

        function addTimelineEvent(message, type = 'info') {
            const timeline = document.getElementById('timeline');
            const event = document.createElement('div');
            const colors = {
                info: 'bg-blue-900 border-blue-600',
                success: 'bg-green-900 border-green-600',
                warning: 'bg-yellow-900 border-yellow-600',
                critical: 'bg-red-900 border-red-600'
            };
            
            event.className = `${colors[type]} border-l-4 rounded p-3 text-sm animate-fade-in`;
            event.innerHTML = `
                <span class="text-slate-400">${new Date().toLocaleTimeString()}</span>
                <span class="ml-2">${message}</span>
            `;
            timeline.appendChild(event);
            timeline.scrollTop = timeline.scrollHeight;
        }

        function activateAgent(agentNum) {
            const agentEl = document.getElementById(`agent${agentNum}`);
            const statusEl = document.getElementById(`agent${agentNum}Status`);
            
            agentEl.classList.add('agent-active', 'border-blue-500');
            statusEl.innerHTML = '<div class="typing-indicator"><span>.</span><span>.</span><span>.</span></div>';
        }

        function completeAgent(agentNum, message) {
            const agentEl = document.getElementById(`agent${agentNum}`);
            const statusEl = document.getElementById(`agent${agentNum}Status`);
            
            agentEl.classList.remove('agent-active');
            agentEl.classList.add('border-green-500');
            statusEl.textContent = `‚úÖ ${message}`;
        }

        async function startDemo() {
            const voiceInput = document.getElementById('voiceInput').value || 
                "I've had fever for 2 days, cough, and tightness in my chest. I have high blood pressure and take lisinopril.";
            
            document.getElementById('agentDashboard').classList.remove('hidden');
            document.getElementById('startDemo').disabled = true;
            
            // Agent 1: Voice Intake
            addTimelineEvent('üé§ Starting voice intake processing...', 'info');
            activateAgent(1);
            await sleep(3000);
            completeAgent(1, 'Urgency: HIGH');
            addTimelineEvent('Voice processed: Urgency HIGH detected (stress level 0.7)', 'warning');
            
            // Agent 2: Symptom Reasoning
            addTimelineEvent('üß† Analyzing symptoms with Gemini 2.0...', 'info');
            activateAgent(2);
            await sleep(4000);
            completeAgent(2, '3 symptoms extracted');
            addTimelineEvent('Symptoms identified: Fever (2 days), Cough, Chest tightness', 'info');
            addTimelineEvent('Medical history: Hypertension detected', 'warning');
            
            // Agent 3: Document Processing
            addTimelineEvent('üìÑ Processing insurance card and medical records...', 'info');
            activateAgent(3);
            await sleep(3000);
            completeAgent(3, 'Documents processed');
            addTimelineEvent('Insurance: Blue Cross PPO (Member ID: ABC123456)', 'success');
            addTimelineEvent('Medical record: Confirms hypertension, previous asthma diagnosis', 'warning');
            
            // Agent 4: Triage Coordination
            addTimelineEvent('‚ö° Coordinating triage decision...', 'info');
            activateAgent(4);
            await sleep(2000);
            addTimelineEvent('RED FLAG: Chest tightness + fever + asthma history', 'critical');
            await sleep(2000);
            completeAgent(4, 'URGENT - ER recommended');
            addTimelineEvent('Triage Decision: URGENT (confidence: 95%)', 'critical');
            addTimelineEvent('Recommended: STAT chest X-ray, ECG, troponin', 'warning');
            
            // Agent 5: Care Plan Generation
            addTimelineEvent('‚úÖ Generating care plans...', 'info');
            activateAgent(5);
            await sleep(3000);
            completeAgent(5, 'Care plans ready');
            addTimelineEvent('Care plans generated for doctor, patient, and system', 'success');
            
            // Display Results
            displayResults();
        }

        function displayResults() {
            // Doctor View
            document.getElementById('doctorView').innerHTML = `
                <div class="bg-emerald-950 rounded p-3 mb-3">
                    <div class="font-bold text-emerald-300">Chief Complaint</div>
                    <div>Fever, cough, chest tightness</div>
                </div>
                <div class="bg-red-950 rounded p-3 mb-3">
                    <div class="font-bold text-red-300">üö® RED FLAGS</div>
                    <div>‚Ä¢ Chest symptoms + Fever + Asthma history</div>
                    <div>‚Ä¢ Rule out pneumonia/MI</div>
                </div>
                <div class="bg-emerald-950 rounded p-3 mb-3">
                    <div class="font-bold text-emerald-300">PMH</div>
                    <div>‚Ä¢ Hypertension</div>
                    <div>‚Ä¢ Asthma</div>
                </div>
                <div class="bg-emerald-950 rounded p-3">
                    <div class="font-bold text-emerald-300">Recommended Workup</div>
                    <div>‚Ä¢ STAT Chest X-ray</div>
                    <div>‚Ä¢ ECG</div>
                    <div>‚Ä¢ Troponin</div>
                </div>
            `;

            // Patient View
            document.getElementById('patientView').innerHTML = `
                <div class="bg-blue-950 rounded p-3 mb-3">
                    <div class="font-bold text-blue-300">Welcome</div>
                    <div>We've prioritized your case based on your symptoms. You'll be seen shortly.</div>
                </div>
                <div class="bg-blue-950 rounded p-3 mb-3">
                    <div class="font-bold text-blue-300">‚è±Ô∏è Estimated Wait</div>
                    <div class="text-xl">15-30 minutes</div>
                </div>
                <div class="bg-blue-950 rounded p-3 mb-3">
                    <div class="font-bold text-blue-300">What to Expect</div>
                    <div>‚Ä¢ Chest X-ray imaging</div>
                    <div>‚Ä¢ Heart monitoring (ECG)</div>
                    <div>‚Ä¢ Blood tests</div>
                    <div>‚Ä¢ Doctor evaluation</div>
                </div>
                <div class="bg-orange-950 rounded p-3">
                    <div class="font-bold text-orange-300">‚ö†Ô∏è If Symptoms Worsen</div>
                    <div>Inform staff immediately if you experience severe chest pain, difficulty breathing, or dizziness.</div>
                </div>
            `;

            // System Actions
            document.getElementById('systemActions').innerHTML = `
                <div class="bg-orange-950 rounded p-3 mb-3">
                    <div class="font-bold text-orange-300">üö® Alerts Sent</div>
                    <div>‚Ä¢ Respiratory therapist notified</div>
                    <div>‚Ä¢ ER physician alerted</div>
                </div>
                <div class="bg-orange-950 rounded p-3 mb-3">
                    <div class="font-bold text-orange-300">üìã Tests Ordered</div>
                    <div>‚Ä¢ Chest X-ray (STAT)</div>
                    <div>‚Ä¢ ECG</div>
                    <div>‚Ä¢ Troponin levels</div>
                </div>
                <div class="bg-orange-950 rounded p-3">
                    <div class="font-bold text-orange-300">üì± Notifications</div>
                    <div>‚Ä¢ SMS sent to patient with wait time</div>
                    <div>‚Ä¢ Alert sent to attending physician</div>
                </div>
            `;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>