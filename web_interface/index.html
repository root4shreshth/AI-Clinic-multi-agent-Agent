<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARA-AI-Powered Clinical Assistant System</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <button id="chatbotToggle" class="chatbot-toggle" aria-label="Open chatbot">
        <span class="chatbot-icon">üí¨</span>
    </button>

    <!-- Chatbot Window -->
    <div id="chatbotWindow" class="chatbot-window hidden">
        <div class="chatbot-header">
            <div class="chatbot-header-info">
                <div class="chatbot-avatar">üè•</div>
                <div class="chatbot-header-text">
                    <div class="chatbot-title">CARA-AI-Powered Clinical Assistant System</div>
                    <div class="chatbot-status">
                        <span class="status-dot"></span>
                        <span>Online</span>
                    </div>
                </div>
            </div>
            <button id="chatbotClose" class="chatbot-close" aria-label="Close chatbot">‚úï</button>
        </div>

        <div id="chatbotMessages" class="chatbot-messages">
            <div class="message bot-message">
                <div class="message-avatar">üè•</div>
                <div class="message-content">
                    <p>Hello! I'm your CARA AI Assistant powered by Gemini 2.0. How can I help you today?</p>
                    <div class="message-time">Just now</div>
                </div>
            </div>
        </div>

        <div class="chatbot-input-area">
            <textarea id="chatbotInput" class="chatbot-input" placeholder="Type your message..." rows="1"></textarea>
            <button id="chatbotSend" class="chatbot-send" aria-label="Send message">
                <span class="send-icon">‚û§</span>
            </button>
        </div>
    </div>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="header-left">
                    <h1>CARA</h1>
                    <p class="subtitle">AI-Powered Clinical Assistant System</p>
                </div>
                <div class="header-right">
                    <div class="powered-label">Powered by</div>
                    <div class="powered-tech">Google ADK + Gemini 2.5 Flash</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">

        <!-- Demo Controls -->
        <div class="demo-card">
            <h2 class="section-title">üé¨ Live Demo</h2>

            <div class="input-grid">
                <!-- Voice Input -->
                <div class="input-section">
                    <label class="input-label">Patient Voice Input</label>
                    <textarea id="voiceInput" class="voice-textarea" rows="4"
                        placeholder="I've had fever for 2 days, cough, and tightness in my chest. I have high blood pressure and take lisinopril. Here's my insurance card..."></textarea>
                </div>

                <!-- Document Upload -->
                <div class="input-section">
                    <label class="input-label">Upload Documents (Simulated)</label>
                    <div class="upload-area">
                        <div class="upload-icon">üìÑ</div>
                        <p class="upload-text">Insurance Card, Medical Records, Prescriptions</p>
                        <button class="btn-upload">Select Files</button>
                    </div>
                </div>
            </div>

            <!-- Start Button -->
            <button id="startDemo" onclick="startDemo()" class="btn-start">
                üöÄ Start Patient Intake Processing
            </button>
        </div>

        <!-- Agent Activity Dashboard -->
        <div id="agentDashboard" class="agent-dashboard hidden">
            <h2 class="section-title">ü§ñ Multi-Agent Activity</h2>

            <div class="agents-grid">
                <!-- Agent 1 -->
                <div id="agent1" class="agent-card">
                    <div class="agent-header">
                        <div class="agent-icon">
                            <span class="icon-emoji">üé§</span>
                        </div>
                        <div class="agent-info">
                            <div class="agent-name">Dr. Echo</div>
                            <div class="agent-role">Voice Intake Specialist</div>
                        </div>
                    </div>
                    <div id="agent1Status" class="agent-status">Waiting...</div>
                </div>

                <!-- Agent 2 -->
                <div id="agent2" class="agent-card">
                    <div class="agent-header">
                        <div class="agent-icon">
                            <span class="icon-emoji">üß†</span>
                        </div>
                        <div class="agent-info">
                            <div class="agent-name">Dr. Insight</div>
                            <div class="agent-role">Clinical Reasoning AI</div>
                        </div>
                    </div>
                    <div id="agent2Status" class="agent-status">Waiting...</div>
                </div>

                <!-- Agent 3 -->
                <div id="agent3" class="agent-card">
                    <div class="agent-header">
                        <div class="agent-icon">
                            <span class="icon-emoji">üìÑ</span>
                        </div>
                        <div class="agent-info">
                            <div class="agent-name">DocuMed</div>
                            <div class="agent-role">Document Intelligence</div>
                        </div>
                    </div>
                    <div id="agent3Status" class="agent-status">Waiting...</div>
                </div>

                <!-- Agent 4 -->
                <div id="agent4" class="agent-card">
                    <div class="agent-header">
                        <div class="agent-icon">
                            <span class="icon-emoji">‚ö°</span>
                        </div>
                        <div class="agent-info">
                            <div class="agent-name">Dr. Priority</div>
                            <div class="agent-role">Emergency Triage Coordinator</div>
                        </div>
                    </div>
                    <div id="agent4Status" class="agent-status">Waiting...</div>
                </div>

                <!-- Agent 5 -->
                <div id="agent5" class="agent-card">
                    <div class="agent-header">
                        <div class="agent-icon">
                            <span class="icon-emoji">‚úÖ</span>
                        </div>
                        <div class="agent-info">
                            <div class="agent-name">CarePath</div>
                            <div class="agent-role">Treatment Planning AI</div>
                        </div>
                    </div>
                    <div id="agent5Status" class="agent-status">Waiting...</div>
                </div>
            </div>

            <!-- Processing Timeline -->
            <div class="timeline-card">
                <h3 class="timeline-title">üîÑ Processing Timeline</h3>
                <div id="timeline" class="timeline-content">
                    <!-- Timeline items will be added dynamically -->
                </div>
            </div>

            <!-- Results Grid -->
            <div class="results-grid">
                <!-- Doctor View -->
                <div class="result-card doctor-view">
                    <h3 class="result-title">
                        <span class="result-icon">üë®‚Äç‚öïÔ∏è</span> Doctor View
                    </h3>
                    <div id="doctorView" class="result-content">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>

                <!-- Patient View -->
                <div class="result-card patient-view">
                    <h3 class="result-title">
                        <span class="result-icon">üè•</span> Patient View
                    </h3>
                    <div id="patientView" class="result-content">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>

                <!-- System Actions -->
                <div class="result-card system-view">
                    <h3 class="result-title">
                        <span class="result-icon">‚öôÔ∏è</span> System Actions
                    </h3>
                    <div id="systemActions" class="result-content">
                        <div class="typing-indicator">
                            <span></span><span></span><span></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>
    <script src="script.js"></script>
    <script>
        // Demo simulation script
        let currentAgent = 0;
        const agents = [
            { id: 1, name: "Voice Intake", duration: 3000 },
            { id: 2, name: "Symptom Reasoning", duration: 4000 },
            { id: 3, name: "Document Processing", duration: 3000 },
            { id: 4, name: "Triage Coordination", duration: 4000 },
            { id: 5, name: "Care Plan Generation", duration: 3000 }
        ];

        function addTimelineEvent(message, type = 'info') {
            const timeline = document.getElementById('timeline');
            const event = document.createElement('div');
            event.className = `timeline-event timeline-${type}`;
            event.innerHTML = `
                <span class="timeline-time">${new Date().toLocaleTimeString()}</span>
                <span class="timeline-message">${message}</span>
            `;
            timeline.appendChild(event);
            timeline.scrollTop = timeline.scrollHeight;
        }

        function activateAgent(agentNum) {
            const agentEl = document.getElementById(`agent${agentNum}`);
            const statusEl = document.getElementById(`agent${agentNum}Status`);

            agentEl.classList.add('agent-active');
            statusEl.innerHTML = '<div class="typing-indicator"><span></span><span></span><span></span></div>';
        }

        function completeAgent(agentNum, message) {
            const agentEl = document.getElementById(`agent${agentNum}`);
            const statusEl = document.getElementById(`agent${agentNum}Status`);

            agentEl.classList.remove('agent-active');
            agentEl.classList.add('agent-complete');
            statusEl.textContent = `‚úÖ ${message}`;
        }

        async function startDemo() {
            const voiceInput = document.getElementById('voiceInput').value;

            document.getElementById('agentDashboard').classList.remove('hidden');
            document.getElementById('startDemo').disabled = true;

            // Agent 1: Voice Intake
            addTimelineEvent('üé§ Starting voice intake processing...', 'info');
            activateAgent(1);
            await sleep(3000);
            completeAgent(1, 'Urgency: HIGH');
            addTimelineEvent('Voice processed: Urgency HIGH detected (stress level 0.7)', 'warning');

            // Agent 2: Symptom Reasoning
            addTimelineEvent('üß† Analyzing symptoms with Gemini 2.0...', 'info');
            activateAgent(2);
            await sleep(4000);
            completeAgent(2, '3 symptoms extracted');
            addTimelineEvent('Symptoms identified: Fever (2 days), Cough, Chest tightness', 'info');
            addTimelineEvent('Medical history: Hypertension detected', 'warning');

            // Agent 3: Document Processing
            addTimelineEvent('üìÑ Processing insurance card and medical records...', 'info');
            activateAgent(3);
            await sleep(3000);
            completeAgent(3, 'Documents processed');
            addTimelineEvent('Insurance: Blue Cross PPO (Member ID: ABC123456)', 'success');
            addTimelineEvent('Medical record: Confirms hypertension, previous asthma diagnosis', 'warning');

            // Agent 4: Triage Coordination
            addTimelineEvent('‚ö° Coordinating triage decision...', 'info');
            activateAgent(4);
            await sleep(2000);
            addTimelineEvent('RED FLAG: Chest tightness + fever + asthma history', 'critical');
            await sleep(2000);
            completeAgent(4, 'URGENT - ER recommended');
            addTimelineEvent('Triage Decision: URGENT (confidence: 95%)', 'critical');
            addTimelineEvent('Recommended: STAT chest X-ray, ECG, troponin', 'warning');

            // Agent 5: Care Plan Generation
            addTimelineEvent('‚úÖ Generating care plans...', 'info');
            activateAgent(5);
            await sleep(3000);
            completeAgent(5, 'Care plans ready');
            addTimelineEvent('Care plans generated for doctor, patient, and system', 'success');

            // Display Results
            displayResults();
        }

        function displayResults() {
            // Doctor View
            document.getElementById('doctorView').innerHTML = `
                <div class="info-block doctor-complaint">
                    <div class="info-title">Chief Complaint</div>
                    <div class="info-text">Fever, cough, chest tightness</div>
                </div>
                <div class="info-block doctor-alert">
                    <div class="info-title">üö® RED FLAGS</div>
                    <div class="info-text">‚Ä¢ Chest symptoms + Fever + Asthma history</div>
                    <div class="info-text">‚Ä¢ Rule out pneumonia/MI</div>
                </div>
                <div class="info-block doctor-history">
                    <div class="info-title">PMH</div>
                    <div class="info-text">‚Ä¢ Hypertension</div>
                    <div class="info-text">‚Ä¢ Asthma</div>
                </div>
                <div class="info-block doctor-workup">
                    <div class="info-title">Recommended Workup</div>
                    <div class="info-text">‚Ä¢ STAT Chest X-ray</div>
                    <div class="info-text">‚Ä¢ ECG</div>
                    <div class="info-text">‚Ä¢ Troponin</div>
                </div>
            `;

            // Patient View
            document.getElementById('patientView').innerHTML = `
                <div class="info-block patient-welcome">
                    <div class="info-title">Welcome</div>
                    <div class="info-text">We've prioritized your case based on your symptoms. You'll be seen shortly.</div>
                </div>
                <div class="info-block patient-wait">
                    <div class="info-title">‚è±Ô∏è Estimated Wait</div>
                    <div class="wait-time">15-30 minutes</div>
                </div>
                <div class="info-block patient-expect">
                    <div class="info-title">What to Expect</div>
                    <div class="info-text">‚Ä¢ Chest X-ray imaging</div>
                    <div class="info-text">‚Ä¢ Heart monitoring (ECG)</div>
                    <div class="info-text">‚Ä¢ Blood tests</div>
                    <div class="info-text">‚Ä¢ Doctor evaluation</div>
                </div>
                <div class="info-block patient-warning">
                    <div class="info-title">‚ö†Ô∏è If Symptoms Worsen</div>
                    <div class="info-text">Inform staff immediately if you experience severe chest pain, difficulty breathing, or dizziness.</div>
                </div>
            `;

            // System Actions
            document.getElementById('systemActions').innerHTML = `
                <div class="info-block system-alerts">
                    <div class="info-title">üö® Alerts Sent</div>
                    <div class="info-text">‚Ä¢ Respiratory therapist notified</div>
                    <div class="info-text">‚Ä¢ ER physician alerted</div>
                </div>
                <div class="info-block system-tests">
                    <div class="info-title">üìã Tests Ordered</div>
                    <div class="info-text">‚Ä¢ Chest X-ray (STAT)</div>
                    <div class="info-text">‚Ä¢ ECG</div>
                    <div class="info-text">‚Ä¢ Troponin levels</div>
                </div>
                <div class="info-block system-notifications">
                    <div class="info-title">üì± Notifications</div>
                    <div class="info-text">‚Ä¢ SMS sent to patient with wait time</div>
                    <div class="info-text">‚Ä¢ Alert sent to attending physician</div>
                </div>
            `;
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>

</html>